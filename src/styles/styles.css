/* CSS Variables for theming */
:root {
   --bg-color: burlywood;
   --text-color: #010101;
   --card-bg: #efefef;
   --border-color: #010101;
   --input-bg: #ffffff;
   --btn-secondary-bg: #6c757d;
   --btn-secondary-text: #ffffff;
}

body.dark-mode {
   --bg-color: #1a1a2e;
   --text-color: #eeeeee;
   --card-bg: #16213e;
   --border-color: #4a4a6a;
   --input-bg: #0f3460;
   --btn-secondary-bg: #4a4a6a;
   --btn-secondary-text: #eeeeee;
}

body {
   background-color: var(--bg-color);
   color: var(--text-color);
   transition: background-color 0.3s, color 0.3s;
}

.container {
   max-width: 650px;
}

/* Header with controls */
.header-controls {
   display: flex;
   justify-content: space-between;
   align-items: baseline;
   width: 85%;
   margin: 0 auto;
}

.header-controls h1 {
   margin: 0;
}

.header-buttons {
   display: flex;
   gap: 0.5em;
}

.icon-btn {
   background: none;
   border: none;
   font-size: 1.5em;
   cursor: pointer;
   padding: 0.25em;
   border-radius: 4px;
   transition: background-color 0.2s;
}

.icon-btn:hover {
   background-color: rgba(0, 0, 0, 0.1);
}

body.dark-mode .icon-btn:hover {
   background-color: rgba(255, 255, 255, 0.1);
}

h1.title {
   text-align: center;
   margin-bottom: 1.5em;
}

.action-buttons {
   display: flex;
   width: 100%;
   justify-content: center;
   gap: 0.5em;
   margin: 0 auto;
   flex-wrap: wrap;
}

.attempts {
   display: flex;
   width: 50%;
   justify-content: space-evenly;
   margin: 0 auto;
}

.attempt-container {
   perspective: 1000px;
   border: 1px solid var(--border-color);
   width: 50px;
   height: 50px;
   border-radius: 50%;
   transform-style: preserve-3d;
}

.attempt, .result {
   backface-visibility: hidden;
   position: absolute;
   width: 100%;
   height: 100%;
   border-radius: 50%;
}

.attempt {
   display: inline-block;
   padding: 9px 0;
   text-align: center;
}

.result {
   transform: rotateY(180deg);
}

.rotate-attempt {
   transform: rotateY(180deg);
   transition: transform 1s;
}

.wrong {
   background-color: #dc3545;
}

.correct {
   background-color: #198754;
}

.description {
   margin: 0 auto;
   display: flex;
   flex-flow: column;
}

.description > span {
   font-weight: 500;
   margin-right:6%;
   margin-bottom: 3%;
   width: fit-content;
}

.description > span:hover {
   text-decoration: underline;
   opacity: .6;
   cursor: pointer;
}

.input-container {
   display: flex;
   justify-content: center;
}

.btn-primary {
   margin-left: 1em;
}

.output-container {
   text-align: center;
}

.output-container h1 {
   height: 41px;
}

@keyframes fade-in {
   from { opacity: 0;}
   to {opacity: 100;}
}

@keyframes fade-out {
   from { opacity: 100;}
   to {opacity: 0;}
}

.fade-in-output {
   animation-name: fade-in;
   animation-duration: .5s;
}

.fade-in-result {
   animation-name: fade-in;
   animation-duration: 5s;
}

.hidden-output {
   opacity: 0;
}

.fade-out {
   animation-name: fade-out;
   animation-duration: 2s;
}

.error-message {
   opacity: 0;
}

/* Toggle switches and settings */
.settings-row {
   display: flex;
   justify-content: center;
   gap: 1.5em;
   margin: 1em 0;
   flex-wrap: wrap;
}

.toggle-setting {
   display: flex;
   align-items: center;
   gap: 0.5em;
   font-size: 0.9em;
}

.toggle-setting .toggle-label {
   cursor: default;
   user-select: none;
}

/* Custom toggle switch */
.toggle-switch {
   position: relative;
   display: inline-block;
   width: 50px;
   height: 26px;
}

.toggle-switch input {
   opacity: 0;
   width: 0;
   height: 0;
   position: absolute;
}

.toggle-slider {
   position: absolute;
   cursor: pointer;
   top: 0;
   left: 0;
   right: 0;
   bottom: 0;
   background-color: #ccc;
   transition: 0.3s;
   border-radius: 26px;
}

.toggle-slider:before {
   position: absolute;
   content: "";
   height: 20px;
   width: 20px;
   left: 3px;
   bottom: 3px;
   background-color: white;
   transition: 0.3s;
   border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
   background-color: #198754;
}

.toggle-switch input:checked + .toggle-slider:before {
   transform: translateX(24px);
}

.toggle-switch input:focus + .toggle-slider {
   box-shadow: 0 0 1px #198754;
}

/* Letter count display */
#letter-count {
   text-align: center;
   font-size: 1.2em;
   letter-spacing: 0.3em;
   margin: 0.5em 0;
   color: var(--text-color);
   opacity: 0.8;
}

/* Timer display */
#timer-display {
   text-align: center;
   font-size: 1.5em;
   font-weight: bold;
   margin: 0.5em 0;
}

#timer-display.timer-warning {
   color: #dc3545;
   animation: pulse 0.5s infinite;
}

@keyframes pulse {
   0%, 100% { opacity: 1; }
   50% { opacity: 0.5; }
}

/* Streak display */
#streak-display {
   text-align: center;
   font-size: 1.2em;
   font-weight: bold;
   color: #ff6b35;
   margin: 0.5em 0;
}

/*********************/
/* How To Play Modal */
/*********************/
.modal-container {
   width: 100%;
   height: 100vh;
   position: absolute;
   background: rgba(14, 13, 14, 0.67);
   top: 0;
   left: 0;
   z-index: 1000;
}

.modal-wrapper {
   width: 75%;
   color: var(--text-color);
   border: 1px solid var(--border-color);
   background-color: var(--card-bg);
   border-radius: 10px;
   padding: 5% 8%;
}

.modal-wrapper section ul li {
   font-size:.9em;
}

.display-none {
   display: none;
}

.show-modal {
   animation-name: fade-in;
   animation-duration: .25s;
}

.hide-modal {
   animation-name: fade-out;
   transition: opacity .25s;
}

.close-modal {
   width: 35px;
   height: 35px;
   display: block;
   float: right;
}

.close-modal:hover {
   cursor: pointer;
   opacity: .4;
}

.fa-xmark {
   width: 35px;
   height: 35px;
   display: inline-block;
   background-repeat: no-repeat;
   background-image: url(../assets/svg/xmark-solid.svg);
}

.instruction-section > p {
   font-style: italic;
}

.red-text, .green-text {
   font-weight: 800;
}

.red-text {
   color:#dc3545;
}

.green-text {
   color:#198754;
}

.scoring-details {
   margin-left: 5%;
}

.coming-soon-ul {
   padding-left: 0;
   list-style-type: none;
}

/*********************/
/* Plays Left Section */
/*********************/
.plays {
   display: flex;
    width: 100%;
    margin: 0 auto;
    justify-content: space-evenly;
    flex-wrap: wrap;
}

.plays > .word {
   width: 3em;
   height: 3em;
   border: 1px dashed var(--border-color);
   border-radius: 15%;
   display: inherit;
   margin-bottom: 10px;
   align-items: center;
   justify-content: space-around;
   font-size: 3vh;
}

@keyframes fade-in-fade-out {
   from {
      opacity: 1
   }

   25% {
      opacity: .35
   }

   50% {
      opacity: .5
   }

   75% {
      opacity: .35
   }

   to {
      opacity: 1
   }
}

.at-play {
   animation-name: fade-in-fade-out;
   animation-duration: 2s;
   animation-iteration-count: infinite;
}

.solved, .not-solved {
   animation-name: fade-in;
   animation-duration: .5s
}

.solved {
   background-color: #198754;
   border:1px solid #198754;
   color: #ffffff;
}

.not-solved {
   background-color: #dc3545;
   border:1px solid #dc3545;
   color: #ffffff;
}

@keyframes slide-up {
   from { height: 0px }
   to { height: 420px }
}

.final-score-wrapper {
   bottom: 0;
   position: absolute;
   left: 50%;
   transform: translateX(-50%);
   width: 65%;
   max-width: 90%;
   border-radius: 75px 75px 0 0;
   animation: slide-up;
   animation-duration: 1s;
   padding: 30px 40px 30px 40px;
}

.final-score h1 {
   text-align: center;
}

.final-score ul {
   margin-top: 2em;
   padding-left: 0;
   list-style-type: none;
   display: flex;
   justify-content: space-between;
}

div.modal-wrapper.final-score-wrapper section.final-score div ul li {
   text-align: center;
}

div.modal-wrapper.final-score-wrapper section.final-score div ul li span {
   display: block;
   font-size: 1.1em;
}

div.percentile-container {
   margin-bottom: 2em;
   margin-top: 2em;
}

div.percentile {
   height: 1em;
   border: 1px solid var(--border-color);
   border-radius: 4px;
   margin-top: 2em;
}

span.percentage-fill {
   position: relative;
   height: 0.9em;
   width: 0;
   margin-bottom: .5em;
   background-color: green;
   display: inline-block;
   border-radius: 3px;
}

span.percentage-fill.fill-effect {
   transition-property: width;
   transition-duration: 1.5s;
}

.percentage-marker {
   border-right: 3px solid var(--border-color);
   margin-top: -13px;
   margin-left: -3px;
   display: inline-block;
   height: 13px;
   position: absolute;
}

.marker-text {
   position: absolute;
   margin-top: -34px;
   margin-left: -8px;
   font-size: .8em;
}

.marker-text-fade-in {
   animation-name: fade-in;
   animation-duration: 1.5s;
}

/* Share button */
.share-container {
   text-align: center;
   margin-top: 1.5em;
   padding-bottom: 1em;
}

#share-btn {
   padding: 0.6em 2.5em;
   font-size: 1em;
}

/* Dark mode form controls */
body.dark-mode .form-control {
   background-color: var(--input-bg);
   color: var(--text-color);
   border-color: var(--border-color);
}

body.dark-mode .form-control::placeholder {
   color: #aaaaaa;
}

body.dark-mode .btn-secondary {
   background-color: var(--btn-secondary-bg);
   border-color: var(--btn-secondary-bg);
   color: var(--btn-secondary-text);
}

body.dark-mode .btn-secondary:hover {
   background-color: #5a5a7a;
   border-color: #5a5a7a;
}

/* Responsive adjustments */

/* Tablets and small desktops */
@media (max-width: 768px) {
   .container {
      padding: 0 15px;
   }

   .modal-wrapper {
      width: 90%;
      padding: 4% 5%;
   }

   .description {
      width: 100%;
   }

   .attempts {
      width: 70%;
   }

   .input-container {
      flex-direction: column;
      align-items: center;
      gap: 0.5em;
   }

   .input-container .form-control {
      width: 80% !important;
   }

   .btn-primary {
      margin-left: 0;
      width: 80%;
   }
}

/* Mobile phones */
@media (max-width: 576px) {
   .container {
      padding: 0 10px;
   }

   h1.title {
      font-size: 2em;
      margin-bottom: 1em;
   }

   .header-controls {
      flex-direction: row;
      justify-content: space-between;
      align-items: baseline;
      width: 85%;
      margin: 0 auto;
   }

   .header-controls h1 {
      font-size: 1.8em;
   }

   .description {
      width: 100%;
   }

   .description p {
      font-size: 0.9em;
   }

   .action-buttons {
      flex-direction: row;
      flex-wrap: wrap;
      gap: 0.4em;
   }

   .action-buttons button {
      flex: 1 1 45%;
      min-width: 120px;
      font-size: 0.85em;
      padding: 0.5em 0.8em;
   }

   .settings-row {
      margin: 0.8em 0;
   }

   .toggle-setting {
      font-size: 0.85em;
   }

   .attempts {
      width: 80%;
   }

   .attempt-container {
      width: 40px;
      height: 40px;
   }

   .attempt {
      padding: 6px 0;
      font-size: 0.9em;
   }

   .input-container {
      flex-direction: column;
      align-items: center;
      gap: 0.5em;
   }

   .input-container .form-control {
      width: 90% !important;
      font-size: 16px; /* Prevents zoom on iOS */
   }

   .btn-primary {
      margin-left: 0;
      width: 90%;
   }

   .output-container h1 {
      font-size: 1.5em;
      height: auto;
      min-height: 35px;
   }

   #letter-count {
      font-size: 1em;
      letter-spacing: 0.2em;
   }

   #timer-display {
      font-size: 1.2em;
   }

   #streak-display {
      font-size: 1em;
   }

   .plays {
      gap: 0.3em;
   }

   .plays > .word {
      width: 2.5em;
      height: 2.5em;
      font-size: 2.5vh;
   }

   /* Modal adjustments for mobile */
   .modal-wrapper {
      width: 95%;
      padding: 4% 4%;
      max-height: 90vh;
      overflow-y: auto;
   }

   .modal-wrapper section ul li {
      font-size: 0.85em;
   }

   .instruction-section h4 {
      font-size: 1.1em;
   }

   .instruction-section h6 {
      font-size: 0.95em;
   }

   .scoring-details {
      margin-left: 2%;
      font-size: 0.9em;
   }

   /* Final score modal mobile */
   .final-score-wrapper {
      width: 100%;
      max-width: 100%;
      left: 0;
      transform: none;
      border-radius: 30px 30px 0 0;
      padding: 20px 20px 25px 20px;
   }

   .final-score h1 {
      font-size: 1.5em;
   }

   .final-score ul {
      flex-direction: column;
      gap: 1em;
      margin-top: 1em;
   }

   .final-score ul li {
      display: flex;
      justify-content: space-between;
      align-items: center;
   }

   div.modal-wrapper.final-score-wrapper section.final-score div ul li span {
      font-size: 1em;
   }

   div.percentile-container {
      margin-bottom: 1em;
      margin-top: 1em;
   }

   div.percentile-container strong {
      font-size: 0.9em;
   }

   #share-btn {
      width: 100%;
      padding: 0.6em 1em;
   }

   .share-container {
      margin-top: 0.5em;
      margin-bottom: 1em;
   }
}

/* Extra small phones */
@media (max-width: 375px) {
   h1.title, .header-controls h1 {
      font-size: 1.5em;
   }

   .action-buttons button {
      flex: 1 1 100%;
      font-size: 0.8em;
   }

   .attempt-container {
      width: 35px;
      height: 35px;
   }

   .attempt {
      padding: 4px 0;
      font-size: 0.8em;
   }

   .plays > .word {
      width: 2.2em;
      height: 2.2em;
      font-size: 2vh;
   }

   .output-container h1 {
      font-size: 1.3em;
   }
}

/* Landscape mode on mobile */
@media (max-height: 500px) and (orientation: landscape) {
   .modal-wrapper {
      margin: 1% auto;
      max-height: 95vh;
   }

   .final-score-wrapper {
      position: relative;
      border-radius: 10px;
      margin: 2% auto;
   }

   .final-score ul {
      flex-direction: row;
   }
}

/* Touch-friendly button sizing */
@media (hover: none) and (pointer: coarse) {
   .action-buttons button {
      min-height: 44px;
   }

   .icon-btn {
      min-width: 44px;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
   }

   .toggle-switch {
      width: 54px;
      height: 30px;
   }

   .toggle-slider:before {
      height: 24px;
      width: 24px;
   }

   .toggle-switch input:checked + .toggle-slider:before {
      transform: translateX(24px);
   }
}
